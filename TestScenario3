import { test, expect } from '@playwright/test';

test('Input Form Submit Test on LambdaTest', async ({ page }) => {
  // 1. Open LambdaTest Selenium Playground
  await page.goto('https://www.lambdatest.com/selenium-playground');

  // Click “Input Form Submit”
  await page.locator('a:has-text("Input Form Submit")').click();

  // 2. Click “Submit” without filling any information
  await page.click('button:has-text("Submit")');

  // 3. Assert "Please fill out this field." error message
  // This is the browser's built-in validation message for required fields
  const nameInput = page.locator('input[name="name"]');
  const validationMessage = await nameInput.evaluate((el) => el.validationMessage);
  expect(validationMessage).toBe('Please fill out this field.');

  // 4. Fill in Name, Email, and other fields
  await page.fill('input[name="name"]', 'John Doe');
  await page.fill('input[name="email"]', 'johndoe@example.com');
  await page.fill('input[name="password"]', 'Password123');
  await page.fill('input[name="company"]', 'LambdaTest');
  await page.fill('input[name="website"]', 'https://example.com');
  await page.fill('input[name="city"]', 'New York');
  await page.fill('input[name="address_line1"]', '123 Main St');
  await page.fill('input[name="state"]', 'NY');
  await page.fill('input[name="zip"]', '10001');

  // 5. From the Country drop-down, select “United States” using text
  await page.selectOption('select[name="country"]', { label: 'United States' });

  // 6. Click “Submit”
  await page.click('button:has-text("Submit")');

  // 7. Validate the success message
  const successMessage = page.locator('.success-msg'); // adjust selector based on actual page
  await expect(successMessage).toHaveText('Thanks for contacting us, we will get back to you shortly.');
});
